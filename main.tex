\documentclass[
    % # memoir class options
    12pt,
    openright,               % chapters start at odd page numbers
    twoside,                 % print on both sides (change to `oneside` to
                             % leave back blank)
    a4paper,
    % # abntex2 class options
    %chapter=TITLE,          % uppercase chapter titles
    %section=TITLE,          % uppercase section titles
    %subsection=TITLE,       % uppercase subsection titles
    %subsubsection=TITLE,    % uppercase subsubsection titles
    % # babel package options
    french,                  % additional hyphenization
    ngerman,                 % additional hyphenization
    spanish,                 % additional hyphenization
    brazil,                  % additional hyphenization
    english,                 % main language of the document
    ]{abntex2}

% # Basic packages
\usepackage{lmodern}           % Latin Modern font
\usepackage[T1]{fontenc}       % font encoding
\usepackage[utf8]{inputenc}    % document encoding (e.g., required for diacritics)
\usepackage{indentfirst}       % indent the first paragraph of each section
\usepackage{color}             % color control
\usepackage{graphicx}          % include graphics
\usepackage{pdfpages}          % include PDFs
\usepackage{microtype}         % typography enhancements

% # Utility packages
\usepackage{import}             % nestable, locally-scoped import directives (note that
                                % it is best to use commands (e.g.,
                                % `subimport{...}{...}`) in their own lines)
\usepackage{amsmath}            % math commands
\usepackage{amssymb}            % math symbols
\usepackage{physics}            % extra utilities for physics notation
\usepackage[version=4]{mhchem}  % chemical formula rendering
\usepackage{cleveref}
\usepackage{tikz}               % LaTeX-based graphics
\usetikzlibrary{cd}             % commutative diagrams

% # Citations
\usepackage[english,hyperpageref]{backref}   % show where works where cited
\usepackage[num]{abntex2cite}                % cite according to ABNT
\citebrackets[]

% # Preamble
\subimport{./src/preamble}{config}   % configuration of packages
\subimport{./src/preamble}{spacing}  % spacing and placement of elements
\subimport{./src/preamble}{quadros}  % definition of schemes ("quadros")
\subimport{./src/preamble}{info}     % general information such as title, author, etc.

\makeindex  % compile our index

% shortcuts
\newcommand{\overreact}{\texttt{overreact}}

\begin{document}
\subimport{./src}{before}

\textual{}  % textual elements from now on (i.e., the actual work)

\subimport{./src}{presentation}

\part{State of the art and theory}%
\label{part:art-theory}

\subimport{./src}{introduction}
\subimport{./src}{methods}


\part{Publications}%
\label{part:publications}

\subimport{./src}{papers}

% This is to be removed at a later time!
% \subimport{./src}{abntex-stuff}

% ----------------------------------------------------------
% Finaliza a parte no bookmark do PDF
% para que se inicie o bookmark na raiz
% e adiciona espaço de parte no Sumário
% ----------------------------------------------------------
\phantompart{}

\subimport{./src}{conclusion}

\postextual{}  % end of the work, now follow references, appendices, etc.

% adding the bibliography to ./src/after.tex leads to compilation issues
% that have to do with the import package
\bibliography{references}
\subimport{./src}{after}

\end{document}
